{{ $settingsCode := .Site.GetPage "/settings/code" -}}
<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

	{{ partial "head_meta.html" . }}
	{{ block "head_meta_includes" . }}{{ end }} 

	<!-- Styles -->
	<link href="/css/Lightmode.bootstrap.min.css" rel="stylesheet">
	<link href="/css/lightmain.css" rel="stylesheet">
	<link rel="stylesheet" href="/css/Darkmode.bootstrap.min.css">
	<link rel="stylesheet" href="/css/darkmain.css">

	{{ block "head_includes" . }}{{ end }} 
	{{ with $settingsCode.Params.siteheader }}{{ . | safeHTML }}{{ end }}
</head>
<body class="kind-{{ .Kind }}{{with .Section }} section-{{ . }}{{ end }}">
{{ block "header" . }}
	<header class="site-header">
		{{ partial "navigation.html" . -}}
	</header>
{{ end }}

{{ block "main" . }}{{ end }}

{{ block "footer" . }}
	{{ partial "footer.html" . -}}
{{ end }}

<script src="/js/bootstrap.min.js"></script>
<script src="/js/medium-zoom.min.js"></script>
<script src="/js/app.js"></script>
{{ block "body_includes" . }}{{ end }} 
{{ with $settingsCode.Params.sitefooter }}{{ . | safeHTML }}{{ end }}
<script>
    const switchElement = document.getElementById('dark-mode-switch');
    const body = document.body;

    switchElement.addEventListener('change', () => {
      if (switchElement.checked) {
        // Enable dark mode
        body.classList.add('dark-mode');
        // Load light mode CSS files
        loadCSS('Lightmode.bootstrap.min.css');
        loadCSS('lightmain.css');
      } else {
        // Disable dark mode
        body.classList.remove('dark-mode');
        // Load dark mode CSS files
        loadCSS('Darkmode.bootstrap.min.css');
        loadCSS('darkmain.css');
      }
    });

    // Function to dynamically load CSS files
    function loadCSS(filename) {
      const link = document.createElement('link');
      link.rel = 'stylesheet';
      link.href = filename;
      document.head.appendChild(link);
    }
  </script>
</body>
</html>
